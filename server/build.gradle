plugins {
    id 'java'
    id 'application'
    id 'com.github.johnrengelman.shadow' version '1.2.3'
}

repositories {
    jcenter()
    maven {
        url "https://oss.sonatype.org/content/repositories/iovertx-3684/"
    }

    ext.vertxVersion = '3.4.2'
    ext.guavaVersion = '21.0'
    ext.junitVersion = '4.12'
    ext.logbackVersion = "1.2.3"
    version = '0.0.1'

    sourceCompatibility = '1.8'


    dependencies {
        // This dependency is found on compile classpath of this component and consumers.
        compile "com.google.guava:guava:$guavaVersion"
        compile "io.vertx:vertx-core:$vertxVersion"
        compile "io.vertx:vertx-web:$vertxVersion"
        compile "ch.qos.logback:logback-classic:$logbackVersion"

        // Use JUnit test framework
        testCompile "junit:junit:$junitVersion"
    }

// Define the main class for the application
    mainClassName = 'io.vertx.core.Launcher'


    shadowJar {
        classifier = 'fat'
        manifest {
            attributes 'Main-Verticle': 'de.endofco.confomondo.CounterVerticle'
        }
        mergeServiceFiles {
            include 'META-INF/services/io.vertx.core.spi.VerticleFactory'
        }
    }
}
